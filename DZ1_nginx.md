1) Install Nginx
yum install nginx

2) Firewall добавить порты в исключения
[root@89-108-65-9 ~]# firewall-cmd --permanent --add-port=80/tcp
success
[root@89-108-65-9 ~]# firewall-cmd --permanent --add-port=443/tcp
success
[root@89-108-65-9 ~]# firewall-cmd --reload
success

3) Добавить nginx в автозапуск
[root@89-108-65-9 ~]# systemctl enable nginx

4) Запустить Nginx
[root@89-108-65-9 ~]# systemctl start nginx

5) Проверить, что работает
- зайти в браузере на ip 89.108.65.9
- [root@89-108-65-9 ~]# systemctl is-active nginx
active

6) Найти логи
[root@89-108-65-9 ~]# ls /var/log/nginx/
access.log  error.log

7) Посчитать строки в логах
[root@89-108-65-9 ~]# wc /var/log/nginx/error.log
  2  52 493 /var/log/nginx/error.log
[root@89-108-65-9 ~]# wc /var/log/nginx/access.log
   71  1344 20948 /var/log/nginx/access.log
Можно одновременно и можно перейти в папку с логами
перейти в каталог с логами
[root@89-108-65-9 ~]# cd /var/log/nginx/
[root@89-108-65-9 nginx]# pwd
/var/log/nginx
[root@89-108-65-9 nginx]# wc error.log access.log
    2    52   493 error.log
   73  1376 21278 access.log
   75  1428 21771 total   

8) Логи
- найти IP, который встречается чаще всех
[root@89-108-65-9 nginx]# cut -d- -f1 access.log > log_ip_stat.md | sort log_ip_stat.md | uniq -c | sort
Вопрос почему в первом случае надо сортировке указывать файл, а во втором случае не поняла вообще что сортирует и еще почему-то надо два раза ее запустить, чтобы вывело
-d - указывает что является разделителем, в данном случае "-"
-f1 - указывает, что нужен 1й столбец до разделителя
sort - сначала надо отсортировать, т.к uniq сравнивает только соседние строки
1079 217.69.135.63
   1 103.249.180.85
   1 107.170.237.113
   1 115.178.101.138
1135 217.69.137.29
   1 139.162.119.197
   1 160.119.141.90
   1 177.55.244.148
   1 181.113.35.50
   1 185.12.124.78
   1 186.192.29.239
   1 187.33.201.42
   1 188.127.152.47
   1 189.19.178.35
   1 194.61.141.140
   1 198.108.66.16
   1 198.167.223.52
   1 201.68.181.104
   1 209.17.97.106
   1 216.245.197.254
   1 31.202.101.40
   1 37.46.133.249
   1 41.60.233.128
   1 46.229.168.137
   1 46.229.168.143
   1 46.229.168.147
   1 46.35.234.42
   1 52.53.201.78
   1 54.218.74.205
   1 5.59.136.238
   1 61.9.53.2
   1 62.4.14.206
   1 66.240.205.34
 167 203.170.145.204
   1 77.120.94.237
   1 78.189.81.126
   1 78.58.126.221
   1 89.186.8.87
   1 91.185.43.103
   1 94.103.85.203
   2 176.32.33.145
   2 212.92.113.60
   3 185.22.152.181
   8 46.242.8.249

   стереть содержимое
   cat /dev/null >| log_ip_stat.md

   Вот так без записи в файл
   [root@89-108-65-9 nginx]# cut -d- -f1 access.log | sort | uniq -c
   а вот так еще правильней!!!!!!
   [root@89-108-65-9 nginx]# cut -d- -f1 access.log | sort | uniq -c | sort -nr
   1172 217.69.137.29
   1112 217.69.135.63
      8 46.242.8.249
      3 185.22.152.181
      2 212.92.113.60
      2 176.32.33.145
      1 94.103.85.203
      1 91.185.43.103
      1 89.186.8.87
      1 78.58.126.221
      1 78.189.81.126
      1 77.120.94.237
      1 66.240.205.34
      1 62.4.14.206
      1 61.9.53.2
      1 5.59.136.238
      1 54.218.74.205
      1 52.53.201.78
      1 46.35.234.42
      1 46.229.168.147
      1 46.229.168.143
      1 46.229.168.137
      1 41.60.233.128
      1 37.46.133.249
      1 31.202.101.40
      1 216.245.197.254
      1 209.17.97.106
      1 201.68.181.104
      1 198.167.223.52
      1 198.108.66.16
      1 194.61.141.140
      1 189.19.178.35
      1 188.127.152.47
      1 187.33.201.42
      1 186.192.29.239
      1 185.12.124.78
      1 181.113.35.50
      1 177.55.244.148
      1 160.119.141.90
      1 139.162.119.197
      1 115.178.101.138
      1 107.170.237.113
      1 103.249.180.85
